@page "/crearSegmento"
@using BusinessLogic
@using Entities.Entidades_Definicion
@using Entities.Enum
@inject SegmentManager SegmentManager

<PageTitle>Crear Segmento</PageTitle>

<div class="container d-flex justify-content-center">
    <div class="card p-4" style="width: 30rem;">
        <h2 class="text-center mb-4">Crear Segmento</h2>

        <form @onsubmit="CreateSegment">
            <!-- Selección del tipo de segmento -->          

            <div class="mb-3">
                <label for="codigo" class="form-label">Código:</label>
                <input type="string" class="form-control" id="codigo" @bind="segmento.SegmentCode">
            </div>

            <div class="mb-3">
                <label for="nombre" class="form-label">Nombre:</label>
                <input type="text" class="form-control" id="nombre" @bind="segmento.SegmentName">
            </div>

            <div class="mb-3">
                <label for="descripcion" class="form-label">Descripción:</label>
                <textarea class="form-control" id="descripcion" rows="3" @bind="segmento.SegmentDescription"></textarea>
            </div>

            <div class="form-check mb-3">
                <input type="checkbox" class="form-check-input" id="obligatorio" @bind="segmento.Obligatory">
                <label class="form-check-label" for="obligatorio">Obligatorio</label>
            </div>

                
            

            <!-- Botón de envío -->
            <div class="d-flex justify-content-center">

                <button type="submit" class="btn btn-danger w-50">Enviar</button>
            </div>

        </form>
    </div>
</div>

@code {
    
    private SegmentDefinition segmento = new SegmentDefinition();
    
    private void CreateSegment()
    {
        if (segmento != null)
        {
            segmento.SegmentId = SegmentManager.AutoIncrement(); // Asignamos un ID
            // Añadimos el segmento en la lista 
            SegmentManager.AddSegment(segmento);

            // Reiniciamos el formulario
            segmento = new SegmentDefinition();

        }
    }
}
    