@page "/modificar-lista-codigo/{Id:int}"
@using Entities.Entidades_Definicion
@using ProyectoEDI.Components.Pages
@inject NavigationManager NavigationManager
@rendermode InteractiveServer

<div class="container d-flex justify-content-center align-items-center vh-100" style="margin-top:-100px">
    <div class="card p-4" style="width: 30rem;">
        <h2>Modificar Lista de Códigos</h2>
        <form @onsubmit="ModificarCodeList">
            <div class="mb-3">
                <label for="name" class="form-label">Nombre:</label>
                <input type="text" class="form-control" id="name" @bind="CodeList.Name" required>
            </div>
            <div class="mb-3">
                <label for="description" class="form-label">Descripción:</label>
                <textarea class="form-control" id="description" @bind="CodeList.Description" rows="3" required></textarea>
            </div>
            <div class="mb-3">
                <label for="codeFormat" class="form-label">Formato de Código:</label>
                <input type="text" class="form-control" id="codeFormat" @bind="CodeList.CodeFormat" required>
            </div>
            <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-danger">Guardar Cambios</button>
            </div>
        </form>
    </div>
</div>

@code {
    [Parameter]
    public int Id { get; set; }

    private CodeList CodeList = new CodeList();

    protected override void OnInitialized()
    {
        // Simular la carga de datos
        CodeList = ListadoCodigos.CodeLists.FirstOrDefault(c => c.Id == Id);
    }

    private void ModificarCodeList()
    {
        Console.WriteLine($"Lista de códigos modificada: {CodeList.Name} - {CodeList.Description}");
        var CodeListExistente = ListadoCodigos.CodeLists.FirstOrDefault(c => c.Id == Id);
        if (CodeListExistente != null)
        {
            CodeListExistente.Name = CodeList.Name;
            CodeListExistente.Description = CodeList.Description;
            CodeListExistente.CodeFormat = CodeList.CodeFormat;

            Console.WriteLine($"Lista de códigos modificada: {CodeListExistente.Name} - {CodeListExistente.Description}");
        }
        else
        {
            Console.WriteLine($"No se encontró una lista de códigos con el ID: {Id} para modificar.");
        }

        //Redirigir al listado de codigos
        NavigationManager.NavigateTo("/listado-codigos");
    }
}