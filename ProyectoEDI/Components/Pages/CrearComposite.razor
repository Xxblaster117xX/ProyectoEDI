@page "/crearComposite"
@using BusinessLogic
@using Entities.Entidades_Definicion
@using Entities.Enum
@inject CompositeManager CompositeManager
@inject NavigationManager Navigation

<PageTitle>Crear Elemento de Dato Compuesto</PageTitle>

<div class="container d-flex justify-content-center">
    <div class="card p-4" style="width: 30rem;">
        <h3 class="text-center mb-4">Crear Elemento de Dato Compuesto</h3>

        <form @onsubmit="createComposite">   

            <div class="mb-3">
                <label for="codigo" class="form-label">Código:</label>
                <input type="text" class="form-control" id="codigo" @bind="compositeDataElement.Code" required>
            </div>

            <div class="mb-3">
                <label for="nombre" class="form-label">Nombre:</label>
                <input type="text" class="form-control" id="nombre" @bind="compositeDataElement.Name" required>
            </div>

            <div class="mb-3">
                <label for="descripcion" class="form-label">Descripción:</label>
                <textarea class="form-control" id="descripcion" rows="3" @bind="compositeDataElement.Description" ></textarea>
            </div>


            <!-- Botón de envío -->
            <div class="d-flex justify-content-center">

                <button type="submit" class="btn btn-danger w-50">Enviar</button>
            </div>

        </form>
    </div>

    <!--Confirmación cuando se crea un mensaje-->
    @if (showPopUpMessage)
    {
        <div class="overlay">
            <div class="popUpConfirmation">
                <h4>Composite Data Element Creado</h4>
                <p>Composición de Elementos de Dato creado con éxito.¿Desea visualizarlo?</p>
                <div class="popup-buttons">
                    <button class="btn btn-success" @onclick="HandleConfirm">Aceptar</button>
                    <button class="btn btn-secondary" @onclick="HandleCancel">Cancelar</button>
                </div>
            </div>
        </div>
    }

</div>

@code {
    public CompositeDataElement compositeDataElement = new CompositeDataElement();
    public bool showPopUpMessage = false;

    public void createComposite()
    {
        compositeDataElement.Id = CompositeManager.AutoIncrementId();
        CompositeManager.AddComposite(compositeDataElement);
       
        showPopUpMessage = true;

    }

    private void HandleConfirm()
    {
        showPopUpMessage = false;
        Navigation.NavigateTo("/listarComposite");
    }
    /// <summary>
    /// Método para el caso de cancelación
    /// </summary>
    private void HandleCancel()
    {
        showPopUpMessage = false;
    }


}
