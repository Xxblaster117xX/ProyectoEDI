@page "/mensajeDetails"

@rendermode InteractiveServer
@using DevExpress.Blazor
@using Entities.Entidades_Definicion
@using Entities.Model.Enum
@using AppLayer;
@inject MessageAppService messageAppService;
@using BusinessLogic.Definition;


<!-- Detalles de las especificaciones de un mensaje-->
<h3>Detalles de un mensaje</h3>

<div class="cw-480 demo-preventsel">
    <DxAccordion ExpandMode="@ExpandMode"
    ExpandCollapseAction="@ExpandCollapseAction"
    AnimationType="LayoutAnimationType.Slide"
    RootItemExpandButtonDisplayMode="AccordionExpandButtonDisplayMode.End">
    
        <Items>
            @if (messageAppService.GetAllMessages()!= null && messageAppService.GetAllMessages().Any())
            {
                @foreach (var message in messageAppService.GetAllMessages())
                {
                    <DxAccordionItem Text=@("Detalles")>
                        <ContentTemplate>
                            <div class="accordeon-inline">
                                <div class="py-3 px-3" tabindex="0">

                                    <strong>Tipo de mensaje: </strong>

                                    <DxComboBox @bind-Value="message.Type"
                                    Data="@messageTypes"
                                    LabelText="Tipo de mensaje"
                                    TextField="@((MessageTypeEnum t) => t.ToString())"
                                    ValueField="@((MessageTypeEnum t) => t)">
                                    </DxComboBox>
                                </div>

                                <strong>Nombre:</strong>

                                <div class="py-3 px-3" tabindex="0">
                                    <DxTextBox @bind-Text="message.Name"
                                    LabelText="ID del mensaje"
                                    ShowClearButton="true" />
                                </div>

                                <strong>Descripción:</strong>

                                <div class="py-3 px-3" tabindex="0">
                                    <DxTextBox @bind-Text="message.Description"
                                    LabelText="Descripción del mensaje"
                                    ShowClearButton="true" />
                                </div>
                            </div>
                            <div class="accordeon-inline">
                                <strong>Versión </strong>

                                <div class="py-3 px-3" tabindex="0">
                                    <DxTextBox @bind-Text="message.Version"
                                    LabelText="Versión del mensaje"
                                    ShowClearButton="true" />
                                </div>

                                <strong>Directorio</strong>

                                <div class="py-3 px-3" tabindex="0">
                                    <DxTextBox @bind-Text="message.DirectoryVersion"
                                    LabelText="Directorio del mensaje"
                                    ShowClearButton="true" />
                                </div>
                            </div>
                            
                        <!--TreeView para ver las partes del mensaje(encabezado, elementos de datos...)-->
                                





                        </ContentTemplate>
                    </DxAccordionItem>
                }
            }
            else
            {
                <p>No hay mensajes disponibles</p>
            }
        </Items>
    </DxAccordion>
</div>



@code {

    /// <summary>
    /// Componentes para que funcione el acordeón definiendo en este caso el modo de expansión y de colpaso
    /// </summary>
    AccordionExpandMode ExpandMode { get; set; } = AccordionExpandMode.SingleOrNone;
    AccordionExpandCollapseAction ExpandCollapseAction { get; set; } = AccordionExpandCollapseAction.HeaderClick;


    /// <summary>
    /// Instanciar un mensaje
    /// </summary>
    static Message message = new Message();
    /// <summary>
    /// Para definir los tipos de mensajes en el DxComboBox
    /// </summary>
    MessageTypeEnum[] messageTypes = Enum.GetValues<MessageTypeEnum>();

    
 
}