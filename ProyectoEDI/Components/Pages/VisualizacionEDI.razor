@page "/visualizacionedi/{Id:int}"
@inject NavigationManager NavigationManager
@using Entities.Entidades_Definicion
@rendermode InteractiveServer

<div class="container d-flex justify-content-center align-items-center vh-100" style="margin-top: -80px">
    <div class="card p-4" style="width: 40rem;">
        <h2>Detalles del mensaje</h2>
        <div class="mb-3">
            <label><strong>Nombre:</strong></label>
            <input class="form-control" type="text" value="@Message.MessageName" disabled readonly>
        </div>
        <div class="mb-3">
            <label><strong>Tipo:</strong></label>
            <input class="form-control" value="@Message.MessageType.ToString()" disabled readonly>
        </div>
        <div class="mb-3">
            <label><strong>Descripción:</strong></label>
            <input class="form-control" type="text" value="@Message.MessageDescription" disabled readonly>
        </div>
        <div class="d-flex justify-content-center">
            <button class="btn btn-danger w-50 m-2" @onclick="Volver">Volver</button>
            <button class="btn btn-danger w-50 m-2" @onclick="EditMensaje">Editar</button>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public int Id { get; set; }

    private Message Message = new Message();

    protected override void OnInitialized()
    {
        Message = ListarMensaje.Messages.FirstOrDefault(c => c.MessageId == Id);
        if (Message == null)
        {
            Console.WriteLine($"No se encontró ningún mensaje con el ID: {Id}");
            NavigationManager.NavigateTo("/listar-mensaje");
        }
        else
        {
            Console.WriteLine($"Se encontro un mensaje con el ID: {Id}");
            Console.WriteLine($"Nombre: {Message.MessageName}, {Message.MessageDescription}");
        }
    }

    private void EditMensaje()
    {
        NavigationManager.NavigateTo($"/modificar-mensaje/{Id}");
    }

    private void Volver()
    {
        NavigationManager.NavigateTo("/listar-mensaje");
    }
}